<%- include("templates/header") %>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- google icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="/assets/common.css" />
    <link rel="stylesheet" href="/assets/userProfile.css" />
    <link rel="stylesheet" href="/assets/bucketlist.css" />
    <!-- cite css or js files here -->
    </head>

    <body>
        <%- include("templates/nav") %>
            <div class="content userProfileContent">
                <!-- your code goes inside here -->
                <section class="profile">
                    <span class="material-symbols-outlined editIcon" data-bs-toggle="modal"
                        data-bs-target="#exampleModal">
                        edit
                    </span>
                    <div class="ImageArea">
                        <img src="userProfileImages/avatar-default.png" alt="avatar" />
                    </div>
                    <p class="username">
                        <%= user.firstName %>
                            <%= user.lastName %>
                    </p>
                    <div class="InfoArea">
                        <div class="box boxOne">
                            <span class="material-symbols-outlined boxIcon">
                                home_pin
                            </span>
                            <% if (!user.homeCity) { %>
                                <p class="boxText">unknown</p>
                                <%} else { %>
                                    <p class="boxText">
                                        <%= user.homeCity %>
                                    </p>
                                    <% } %>
                        </div>
                        <div class="box boxTwo" onclick="goTravelHistroy()">
                            <span class="material-symbols-outlined boxIcon">
                                where_to_vote
                            </span>
                            <% if (!user.bucketlist) { %>
                                <p class="boxText">0 country</p>
                                <%} else { %>
                                    <p class="boxText">
                                        <%= user.bucketlist.length %> countries
                                    </p>
                                <% } %>
                        </div>
                    </div>
                </section>
                <% if (user.type=="leader" ) { %>
                    <section class="buttonArea">
                        <div class="ButtonAreaCard">
                            <span class="material-symbols-outlined">
                                manage_accounts
                            </span>
                            Manage Group
                        </div>

                    </section>
                    <%} else{ %>
                        <section class="buttonArea">
                            <div class="ButtonAreaCard">
                                <span class="material-symbols-outlined buttonIcon">
                                    group_add
                                </span>
                                Create Group
                            </div>
                            <div class="ButtonAreaCard">
                                <span class="material-symbols-outlined  buttonIcon">
                                    group
                                </span>
                                Join Group
                            </div>
                        </section>
                        <% } %>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Profile</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="height:300px;overflow: hidden;">
                            <div class="row">
                                <div class="col inputBox">
                                    <input id="firstNameInput" type="text" name="firstName" class="form-control" placeholder="First name"
                                        aria-label="First name" value="<%= user.firstName %>">
                                </div>
                                <div class="col inputBox">
                                    <input id="lastNameInput" type="text" name="lastName" class="form-control" placeholder="Last name"
                                        aria-label="Last name" value="<%= user.lastName %>">
                                </div>
                            </div>
                            <input id="emailInput" type="text" name="email" style="margin-bottom: 20px;" class="form-control"
                                placeholder="Input email" aria-label="email" value="<%= user.email %>">
                            <input id="homeCityInput" type="text" name="home_city" style="margin-bottom: 20px;" class="form-control"
                                placeholder="Input home city" aria-label="address" value="<%= user.home_city %>">
                            <div id="imagePreview">
                                <img id="imagePreviewHolder" src="userProfileImages/avatar-default.png"
                                    alt="avatar_preview" />
                                <input type="file" id="imageInput" style="z-index:0;position: absolute;"
                                    onchange="uploadImage()" />
                                <label for="imageInput" class="btn btn-secondary">upload avatar</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button onclick="submitForm()" type="button" class="btn btn-primary">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>

            
            <%- include("templates/bucketlist") %>
            
            <%- include("templates/bottomNav") %>
                <script src="/scripts/userprofile.js"></script>  
    </body>

    </html>