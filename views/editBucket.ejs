<%- include("templates/header") %>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/assets/common.css" />
    <!-- cite css or js files here -->
    </head>

    <style>
        .img-fluid {
            position: relative
        }

        .label-overlay {
            position: absolute;
            top: 8%;
            left: 95%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 1;
            color: white;
            /* Set the text color */
            opacity: 0.5;
            /* Hidden by default */
        }
    </style>

    <body>
        <%- include("templates/nav") %>

            <container>
                <% if (card.travelImg) { %>
                    <img src="data:image/png;base64,<%= card.travelImg %>" alt="cover" class="img-fluid" style="width:100%">
                <% } else { %>
                    <img src="https://picsum.photos/seed/<%= card._id %>/300/200" alt="cover" class="img-fluid" style="width:100%">
                <% } %>

                <div class="container">
                    <h1 class="display-1">Edit Bucket List</h1>
                    <p>Take record of your unforgetable journey here</p>
                    
                    <form action="/editBucket" method="post" enctype="multipart/form-data">
                        <label for="imageInput" style="float:right" class="label-overlay">
                            <span class="material-symbols-outlined">
                                imagesmode
                            </span>
                        </label>
                        <div class="container">
                            <br>
                            <input id="imageInput" type="file" name="avatar" style="display:none;" />
                        </div>

                        <div class="form-group">
                            <label for=""></label>
                            <input id="" type="hidden" class="form-control" name="cardID" value="<%= card._id %>">
                        </div>

                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea type="description" class="form-control" name="description"
                                rows="5"><%= card.description %></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>

            </container>

            <%- include("templates/bottomNav") %>
    </body>

    <script>
        $(document).ready(function () {
            $("#imageInput").change(function () {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('.img-fluid').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(this.files[0]);
                }
            });
        });
    </script>

    </html>